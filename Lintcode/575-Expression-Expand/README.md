
Basically it is a stack.
When reading a digit, append it to the number;
when reading a '[' put the number into stack;
when reading a char, append it to the string;
when reading a ']', pop stack to get the number, and append the real string, pull it back into the stack.    

