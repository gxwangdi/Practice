
Take care of all the edge cases. Clarify them before and validate them afterwards.

The simple way is to follow the cousin definition, get depth and parents respectively. Each of these sub-routine is easy.
