
Brute force is easy, guess that is why this question is said to be easy.  But the follow up takes me almost the whole morning, and no clue.   

Number theory is always driving me mad! But it is really elegant and highly efficient when the solution comes out.   

 